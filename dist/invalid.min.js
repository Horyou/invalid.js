/*! invalid.js - v0.1.5
 *  Release on: 2014-08-28
 *  Copyright (c) 2014 StÃ©phane Bachelier
 *  Licensed MIT */
!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define([],b):a.Ruler=b()}(this,function(){"use strict";var a=function(a,b){this.rules=a,this.options=b||{}};return a.prototype={setup:function(a){this.validator=a},getProperty:function(a){return a?a.attr(this.options.property||"name"):null},_checkRules:function(a,b){if(!this.validator)throw new Error("validator is not defined.");return this.validator.rules[a.rule].apply(null,a.options?[b,a.options]:[b])},_validateField:function(a,b){var c=this.rules[a];if(!c){if(this.options.ignoreMissing)return!0;throw new Error("Rule not found for attribute #"+a)}(Array.isArray?Array.isArray(c):c instanceof Array)||console.error("rule should be defined as an array.");for(var d=0,e=c.length;e>d;d+=1)if(!this._checkRules(c[d],b)){this._addError(a,c[d]);break}return this.errors},_addError:function(a,b){this.errors[a]=b.message},foo:function(a,b){this.errors={};var c;if(b&&b.empty)for(c in a)this._addError(c,"");for(c in a)this._validateField(c,a[c]);return Object.keys(this.errors).length?this.errors:null},$validate:function(a,b){var c={};return c[this.getProperty(a)]=a.val(),this.foo(c,b)},validate:function(a,b){return this.foo(a,b)}},a});